define(["jquery","underscore","backbone"],function(b,a,d){var c=d.Model.extend({urls:{"audio.add":"audio.add","audio.delete":"audio.delete"},defaults:{play:false,loadprogess:0,playprogess:0,pluckFields:["artist","duration","genre","title"]},audioAdd:function(){var e=this;var g={};g.audio_id=this.get("aid");g.owner_id=this.get("owner_id");var f=e.urls["audio.add"];VK.Api.call(f,g,function(h){if(h&&h.response){e.set({owner_id:parseInt(e.app.attributes.mid)});e.trigger("audio.add")}else{alert(h.error.error_msg)}})},audioDelete:function(){var e=this;var h={};h.audio_id=this.get("aid");h.oid=this.app.attributes.mid;var g=this.previous("owner_id");var f=this.urls["audio.delete"];VK.Api.call(f,h,function(i){if(i&&i.response){if(!g){e.collection.remove(e);e.trigger("audio.delete")}}else{alert(i.error.error_msg)}})}});return c});