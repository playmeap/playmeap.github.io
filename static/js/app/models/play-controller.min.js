define(["jquery","underscore","backbone"],function(c,a,d){var b=d.Model.extend({defaults:{repeat:false,setBroadcast:false},initialize:function(){this.bind("change:aid",this.changeAcid,this);this.bind("change:setBroadcast",this.setBroadcast,this)},getAudioModel:function(g,f){if(!g){g=this.get("aid")}if(!f){g=this.get("owner_id")}if(!f){f=this.app.attributes.mid}g=parseInt(g);f=parseInt(f);var e=this.app.collections.audios.findWhere({aid:g,owner_id:f});console.log("a",e);if(!e){e=a.first(this.app.collections.audios.models)}return e},setBroadcast:function(){var g={};var f=this.get("setBroadcast");if(f){var e=this.getAudioModel();g.audio=e.get("owner_id")+"_"+e.get("aid")}VK.Api.call("audio.setBroadcast",g,function(h){if(h&&h.response){}else{alert(h.error.error_msg)}});this.app.log("PlayerControllerModel.setBroadcast: "+f)},changeAcid:function(){this.setBroadcast()}});return b});