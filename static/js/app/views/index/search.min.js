define(["jquery","underscore","backbone","app/views/index/friend-item","app/views/index/audio-item"],function(d,a,f,b,e){var c=f.View.extend({tagName:"div",className:"search-list-view",events:{"click .friends-list-item":"eventClickToFriend"},initialize:function(g){this.parent=g.parent;this.wrap=g.wrap;this.children=[];this.nodes={};this.controllerModel=this.app.models.playercontroller;this.controllerModel.bind("change:searchName",this.render,this)},eventClickToFriend:function(){this.nodes.$nodeAudios.html("")},render:function(){this.$el.addClass("preload");var h=this;a.each(this.children,function(l){l.remove()},this);this.el.innerHTML="";var k=this.controllerModel.get("searchName");var g=this.app.collections.audios.searchByName(k);var i=this.app.collections.users.searchByName(k);if(!g&&!i){this.$el.removeClass("preload");this.el.innerHTML="";return this}if(g.length===0&&i.length===0){this.$el.removeClass("preload");this.el.innerHTML="Не найдено";return this}this.$el.removeClass("preload");if(i.length>0){var j=d('<ul class="friends-list-view friends-list-view_search"></ul>');a.each(i,function(n,m){var l=new b({parent:h,model:n});this.children[n.cid]=l;j.append(l.render().el);if(m==i.length-1){this.$el.append(j);this.nodes.$nodeFriends=j}},this)}if(g.length>0){$nodeAudios=d('<ul class="audios-list-view audios-list-view_search"></ul>');a.each(g,function(n,m){var l=new e({parent:h,model:n});this.children[n.cid]=l;$nodeAudios.append(l.render().el);if(m==g.length-1){this.$el.append($nodeAudios);this.nodes.$nodeAudios=$nodeAudios}},this)}}});return c});