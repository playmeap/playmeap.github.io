define(["jquery","underscore","backbone","app/views/index/audio-item"],function(b,a,e,d){var c=e.View.extend({className:"preload audios-list-view",tagName:"ul",initialize:function(f){this.children={};this.parent=f.parent;this.wrap=f.wrap;this.collection=this.app.collections.audios;this.collection.bind("reset",this.render,this);this.collection.bind("add",this.addItem,this);this.collection.bind("unshift",this.addPrepend,this);this.collection.collectionModel.bind("change",this.changeCollectionModel,this);this.render()},changeCollectionModel:function(){this.$el.addClass("preload")},addPrepend:function(){var g=this.collection.at(0);var f=new d({parent:self,model:g});if(this.children[g.cid]){this.children[g.cid].remove()}this.children[g.cid]=f;this.$el.prepend(f.render().el)},addItem:function(i,f,h){var g=this;(function(l,k,n){var j=new d({parent:g,model:l});if(g.children[l.cid]){g.children[l.cid].remove()}g.children[l.cid]=j;if(n&&((n.at)||(n.at===0||n.at===-1))){if(n.at<0){g.$el.prepend(j.render().el);return this}var m=b(".audios-list-item:nth-child("+n.at+")");if(m.length>0){m.after(j.render().el);return this}return this}g.$el.append(j.render().el)})(i,f,h);return this},render:function(){this.app.log("AudiosView.render");var f=this;this.el.innerHTML="";setTimeout(function(){f.$el.removeClass("preload")},500);a.each(this.children,function(g,h){g.remove();delete this.children[h]},this);a.each(this.collection.models,this.addItem,this)}});return c});