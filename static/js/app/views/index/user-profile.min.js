define(["jquery","underscore","backbone","app/models/user-profile","text!templates/index/user-profile.tpl"],function(e,c,f,d,a){var b=f.View.extend({tagName:"div",className:"userprofile-list-view",initialize:function(g){this.children={};this.parent=g.parent;this.wrap=g.wrap;this.nodes={};this.model=new d();this.model.bind("change",this.render,this);this.app.playercontroller.model.bind("change:owner_id",this.updateData,this)},updateData:function(){this.$el.addClass("preload");var g=this.app.playercontroller.model.get("owner_id");this.model.clear({silent:true});this.model.set({user_id:g},{silent:true});this.model.fetch()},render:function(){var g=this;var i=this.model.toJSON();this.el.innerHTML=c.template(a)(i);this.nodes.$photo_50=this.$el.find(".userprofile-list-view-head-image");var h=new Image();h.onload=function(){this.setAttribute("class","userprofile-list-view-head-img");g.nodes.$photo_50.append(this);g.nodes.$photo_50.removeClass("preload")};h.src=i.photo_50;this.$el.removeClass("preload");return this}});return b});