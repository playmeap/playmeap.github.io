define(["jquery", "underscore", "backbone", "text!templates/login.html"], function (d, c, e, b) {
    var a = e.View.extend({
        tagName: "div",
        className: "appLoginView",
        events: {"click button": "loginApp"},
        initialize: function () {
            VK.Auth.logout();
            this.$el.removeClass("preload");
            this.render()
        },
        loginApp: function () {
            var f = this;
            var g = this.app.attributes.getScope();
            VK.Auth.login(function (h) {
                if (h.session) {
                    f.app.attributes.logined = true;
                    c.extend(f.app.attributes, h.session);
                    f.app.router.navigate("/", {trigger: true})
                }
            }, g)
        },
        render: function () {
            this.el.innerHTML = b;
            d("body").removeClass("preload").html(this.el);
            return this
        }
    });
    return a
});