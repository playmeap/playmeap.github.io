define(["jquery","underscore","backbone","appdir/router.min","models/index.min"],function(f,c,g,b,e){var a=g.View.prototype.remove;g.View.prototype.remove=function(){if(this.children){for(var h in this.children){if(this.children[h].remove){this.children[h].remove()}}}return a.call(this,arguments)};var d={attributes:{debug:false,logined:false},defaultOptions:{},router:false,collections:{},models:{},views:{}};d.log=function(h){if(d.attributes.debug){console.info("[app log]",h.msg);if(h.data){console.log(h.data);console.log("")}}};d.start=function(){g.Router.prototype.app=d;g.View.prototype.app=d;g.Model.prototype.app=d;g.Collection.prototype.app=d;if(document.readyState==="complete"){d.router=new b();d.initialize();g.history.start({pushState:false})}else{document.addEventListener("DOMContentLoaded",function(){window.removeEventListener("load",arguments.callee,false);document.removeEventListener("DOMContentLoaded",arguments.callee,false);d.router=new b();d.initialize();g.history.start({pushState:false})});window.addEventListener("load",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);window.removeEventListener("load",arguments.callee,false);d.router=new b();d.initialize();g.history.start({pushState:false})},false)}};d.initialize=function(){c.extend(d.attributes,d.defaultOptions);d.models.index=new e();d.log({msg:"App init",data:d,level:1})};return d});