define(["underscore","backbone","views/login/index.min","views/index.min","views/audios/index.min","views/friends/index.min","collections/audios/index.min","collections/users/users.min"],function(h,g,e,d,f,c,i,b){var a=g.Router.extend({routes:{"":"index",login:"loginAction",logout:"logoutAction","id_:id/audios/list":"audiosAction","id_:id/friends":"friendsAction","*path":"defaultAction"},_createBaseCollections:function(p){var n={friends:false,audio:false};if(p.friends){if(this.app.collections.friendsList){var k=this.app.collections.audioList.options;var m=h.extend({},k,p.friends);if(!k.user_id){k.user_id=m.user_id}if(!h.isEqual(k,m)){n.friends=true;this.app.collections.friendsList.options=m;this.app.collections.friendsList.loadData()}}else{n.friends=true;this.app.collections.friendsList=new b({user_id:p.friends.user_id})}}if(p.audio){if(this.app.collections.audioList){var o=this.app.collections.audioList.options;o.album_id=false;var q=h.extend({},o,p.audio);if(!o.user_id){o.user_id=q.user_id}if(!h.isEqual(o,q)){n.audio=true;this.app.collections.audioList.options=q;this.app.collections.audioList.loadData()}}else{n.audio=true;this.app.collections.audioList=new i({owner_id:p.audio.owner_id,album_id:false})}}if(p.audioFavorites){if(this.app.collections.audioFavorites){var l=this.app.collections.audioFavorites.options;var j=h.extend({},l,p.audioFavorites);if(!l.owner_id){l.owner_id=j.owner_id}if(!h.isEqual(l,j)){n.audioFavorites=true;this.app.collections.audioFavorites.options=j;this.app.collections.audioFavorites.loadData()}}else{n.audioFavorites=true;this.app.collections.audioFavorites=new i({owner_id:p.audioFavorites.owner_id,album_id:p.audioFavorites.album_id})}}return n},index:function(){if(!this.app.attributes.logined){return this.navigate("#/login",{trigger:true})}if(!this.app.views.index){this.app.views.index=new d()}this.navigate("#/id_"+this.app.attributes.mid+"/audios/list",{trigger:true})},audiosAction:function(l){if(!this.app.attributes.logined){return this.navigate("#/login",{trigger:true})}if(!this.app.views.index){this.app.views.index=new d()}var k={friends:{user_id:this.app.attributes.mid},audio:{owner_id:l},audioFavorites:{owner_id:this.app.attributes.mid,album_id:true}};var j=this._createBaseCollections(k);if(!this.view||this.view.name!=="AudiosIndexView"){this.view=new f({createCollections:j})}else{this.view.reload({childs:["appContentCol1"]})}},friendsAction:function(l){if(!this.app.attributes.logined){return this.navigate("#/login",{trigger:true})}if(!this.app.views.index){this.app.views.index=new d()}var k={friends:{user_id:l},audio:{owner_id:this.app.attributes.mid},audioFavorites:{owner_id:this.app.attributes.mid,album_id:true}};var j=this._createBaseCollections(k);if(!this.view||this.view.name!=="FriendsIndexView"){this.view=new c({createCollections:j})}else{console.log("reload")}},logoutAction:function(){VK.Auth.logout();this.navigate("login",{trigger:true})},loginAction:function(){if(this.view){this.view.remove()}if(this.app.views.index){this.app.views.index.remove();delete this.app.views.index}this.view=new e()},defaultAction:function(j){if(!this.app.attributes.logined){return this.navigate("#/login",{trigger:true})}if(!this.app.views.index){this.app.views.index=new d()}this._createBaseCollections({friends:{user_id:this.app.attributes.mid},audio:{owner_id:this.app.attributes.mid},audioFavorites:{owner_id:this.app.attributes.mid,album_id:true}});this.app.log({msg:"router > "+j})}});return a});